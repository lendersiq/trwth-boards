<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../styles/base.css">
  <title>Average Demo</title>
</head>
<body>
  <script>
    window.boardConfig = {
      board_layout: { cols: 12, row_height: 110, gap: 8, storage_key: "averageDemo-layout" },
      board: [
        {
          id: "commercialDemandDeposits",
          title: "Commercial Demand Deposits",
          type: "table",
          primary_key: { id: "Branch_Number", source: "checking" },
          secondary_keys: ["Portfolio"],
          columns: [
            { heading: "Branch", id: "Branch_Number", column_type: "data", data_type: "integer", source: "checking" },
            { heading: "Balance", id: "Average_Balance", column_type: "data", data_type: "currency", source: "checking" },
            { heading: "Goal", id: "Commercial_Demand_Goal", column_type: "data", data_type: "currency", source: "branch_data" },
            { heading: "YTD Performance", id: "YTD_Performance", column_type: "function", data_type: "percent",
              fn: "ytdPerformance", params: ["Average_Balance", "Commercial_Demand_Goal"] }
          ],
          filters: [
            { id: "Branch_Number", source: "checking", filter: "[2,4,10]" },
            { id: "Class_Code", source: "checking", filter: ">=2 && <=7" },
            { id: "Open_Date", source: "checking", filter: "> 1982-08-04" }
          ]
        },
        {
          id: "commercialSavingsDeposits",
          title: "Commercial Savings Deposits",
          type: "table",
          primary_key: { id: "Branch_Number", source: "savings" },
          secondary_keys: ["Portfolio"],
          columns: [
            { heading: "Branch", id: "Branch_Number", column_type: "data", data_type: "integer", source: "savings"},
            { heading: "Balance", id: "Average_Balance", column_type: "data", data_type: "currency", source: "savings" },
            { heading: "Goal", id: "Commercial_Savings_Goal", column_type: "data", data_type: "currency", source: "branch_data" },
            { heading: "YTD Performance", id: "YTD_Performance", column_type: "function", data_type: "percent",
              fn: "ytdPerformance", params: ["Average_Balance", "Commercial_Savings_Goal"] }
          ],
          filters: [{ id: "Branch_Number", source: "savings", filter: "[2,4,10]" }]
        },
        {
          id: "commercialLoans",
          title: "Commercial Loans closed this year",
          type: "table",
          primary_key: { id: "Owner_Code", source: "loan" },
          secondary_keys: ["Portfolio"],
          columns: [
            { heading: "Officer", id: "Owner_Code", column_type: "data", data_type: "integer", source: "loan" },
            { heading: "Principal", id: "Principal", column_type: "data", data_type: "currency", source: "loan" },
            { heading: "Goal", id: "Goal", column_type: "data", data_type: "currency", source: "officer_data" },
            { heading: "YTD Performance", id: "YTD_Performance", column_type: "function", data_type: "percent",
              fn: "ytdPerformance", params: ["Principal", "Goal"] }
          ],
          filters: [
            { id: "Owner_Code", source: "loan", filter: "[92]" },
            { id: "Date_Opened", source: "loan", filter: "> 2024-01-01" },
            { id: "Branch", source: "loan", filter: "[14]" }
          ]
        },
        {
          id: "uniqueLoanTypes",
          title: "Unique loan type count",
          type: "table",
          primary_key: { id: "Class_Code", source: "loan" },
          secondary_keys: ["Portfolio"],
          columns: [
            { heading: "Type", id: "Class_Code", column_type: "data", data_type: "integer", source: "loan" },
            { heading: "Type Count", id: "type_count",  column_type: "formula", data_type: "integer", formula: "count", source: "loan", target_id: "Class_Code" },
            { heading: "Principal", id: "Principal", column_type: "data", data_type: "currency", source: "loan" },
            { heading: "Average Principal", id: "averagePrincipal",  column_type: "formula", data_type: "currency", formula: "average", source: "loan", target_id: "Principal" },
          ],
          filters: [
            { id: "Owner_Code", source: "loan", filter: "[92]" },
            { id: "Date_Opened", source: "loan", filter: "> 2024-01-01" },
            { id: "Branch", source: "loan", filter: "[14]" }
          ]
        },
      ]
    };
  </script>
  <script src="../../core/trwth.js" defer></script>
</body>
</html>